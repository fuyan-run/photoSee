!function(t){t.fn.extend({photoSeeAll:function(e){function i(){l=s.width,w=s.height,l>c&&(l=c,w=l/m),w>f&&(w=f,l=w*m),l-=20,w-=20,u.css({height:Math.floor(w),width:Math.floor(l),left:Math.floor((c-l)/2),top:Math.floor((f-w)/2)})}function o(){var t=l,e=w,i=(c-t)/2,o=(f-e)/2;u.css({width:t,height:e,left:i,top:o})}function n(e){var i=t("#showTip");i.text(""+e).fadeIn(),clearTimeout(s.showTimer),s.showTimer=setTimeout(function(){i.fadeOut()},1e3)}function r(t){var e=parseInt(t.wheelDelta||-t.detail);e>0?a():h(),t.preventDefault()}function a(){l*=1+d.ratio,w*=1+d.ratio,l>16*s.width?(l=16*s.width,w=l/m):l>.9*s.width&&l<1.1*s.width&&(l=s.width,w=l/m),n(parseInt(l/s.width*100)+"%"),o()}function h(){l*=1-d.ratio,w*=1-d.ratio,l<.05*s.width?(l=.05*s.width,w=l/m):l>.9*s.width&&l<1.1*s.width&&(l=s.width,w=l/m),n(parseInt(l/s.width*100)+"%"),o()}var d={ratio:.2,template:{IMAGE:"<img ondragstart='return false;' style='position: absolute; top: 0; left: 0;' src='"+e.src+"' />"},showTimer:null},s=t.extend({},d,e);t(".photoSee").append(s.template.IMAGE),t("#X > i").on("click",function(){var e=window.parent||window.top,i=e.document.getElementById("seeMore");t(i).remove()});var l,w,c=window.innerWidth,f=window.innerHeight,u=t("img"),m=s.width/s.height;if(i(),"ontouchstart"in window);else{var p=navigator.userAgent.indexOf("Firefox")>-1,g=p?"DOMMouseScroll":"mousewheel";document.addEventListener(g,function(t){r(t)},!1),u.dblclick(function(){i()});var v,I,S,M,x;u.on("mouseover",function(){}).on("mousedown",function(e){v=e.clientX,I=e.clientY,M=t(this).position().left,x=t(this).position().top,imgW=t(this).width(),imgH=t(this).height(),S=!0,t(this).on("mousemove",function(e){if(S){var i=e.clientX,o=e.clientY;if(imgW>c){var n=i-v+M;n>0&&(n=0),c-imgW>n&&(n=c-imgW),t(this).css({left:n})}if(imgH>f){var r=o-I+x;r>0&&(r=0),f-imgH>r&&(r=f-imgH),t(this).css({top:r})}}})}).on("mouseup",function(){S=!1})}}});t.extend({viewerSee:function(e){if(!window.applicationCache)return void alert("抱歉您的浏览器版本太低,请更换高版本浏览器或切换到高速模式,建议使用火狐浏览器或者谷歌chrome浏览器");var i=t(e),o=t(e)[0].src;if(!o)return void alert("您图片的路径不正确，请检查");var n,r;n=i[0].naturalWidth,r=i[0].naturalHeight;var a=window.innerWidth,h=window.innerHeight;localStorage.getImgId=JSON.stringify({width:n,height:r,src:o});var d=window.parent||window.top,s=d.document.getElementById("seeMore");t(s).remove(),t("<iframe></iframe").appendTo("body").attr("id","seeMore").attr("src","extendSeeImg/photoSee.html").css({position:"fixed",left:0,top:0,width:a,height:h,overflow:"hidden",zIndex:Math.pow(10,20),"border-radius":"4px"})},initViewerSee:function(){var e=JSON.parse(localStorage.getImgId);t(".photoSee").photoSeeAll(e)}})}(jQuery);